cluster: eks-demo

active: "true"
country: kr
env: demo
group: eks-demo
role: mgmt

aws_account_id: "396608815058"
aws_region: ap-northeast-2

hostname:
  internal: in.demo.opspresso.com
  public: demo.opspresso.com

# operation:
#   nodeSelector: operation

# monitoring:
#   nodeSelector: monitoring

argocd:
  acm_arn: arn:aws:acm:ap-northeast-2:396608815058:certificate/f9c8b67e-5f3f-4aa2-9411-5fa987e01c57
  hostname: argocd.demo.opspresso.com
  github:
    org: opspresso # github org
    team: sre
  google:
    enabled: false
  chatUrl: https://app.slack.com/client/T03FUG4UB/C035P1YD72A

argo_workflows:
  github:
    org: opspresso # github org
    team: sre

atlantis:
  github:
    user: nalbam-bot
  allowlist: github.com/opspresso/terraform-*

# aws_ebs_csi_driver:
#   image:
#     repository: public.ecr.aws/ebs-csi-driver/aws-ebs-csi-driver
#   nodeDriverRegistrar:
#     image:
#       repository: k8s.gcr.io/sig-storage/csi-node-driver-registrar
#   livenessProbe:
#     image:
#       repository: k8s.gcr.io/sig-storage/livenessprobe
#   useOldCSIDriver: false

# aws_efs_csi_driver:
#   id: "fs-0d24289c6d6ad35d7"

aws_node_termination_handler:
  replicas: 1
  slack:
    channel: "sandbox"
    emoji: ":construction:"

# chaoskube:
#   interval: 20m
#   timezone: "Asia/Seoul"

cluster_autoscaler:
  scan_interval: 20s
  scale_down_delay_after_delete: 1m
  scale_down_utilization_threshold: 0.6

# cluster_overprovisioner:
#   replicas: 0
#   cpu: "1"
#   memory: 1Gi

cluster_role:
  readonly:
    enabled: true

dashboard:
  requests:
    cpu: "200m"
    memory: 512Mi
  limits:
    cpu: "500m"
    memory: 1Gi

ingress_nginx:
  replicas: 3

istio:
  global:
    hub: gcr.io/istio-release
  pilot:
    autoscale: false
    min: 3
    max: 3
  gateway:
    autoscale: false
    min: 3
    max: 3
  tracing:
    sampling: 10

target_group:
  internal_http: arn:aws:elasticloadbalancing:ap-northeast-2:396608815058:targetgroup/demo-in-http-0/1ce364d032be7b33
  public_http: arn:aws:elasticloadbalancing:ap-northeast-2:396608815058:targetgroup/demo-http-0/a766fcc903146b7d

kubecost:
  hostname: kubecost.demo.opspresso.com

grafana:
  hostname: grafana.demo.opspresso.com
  auth:
    github:
      enabled: true
      org: opspresso # github org
      team_ids: sre
    google:
      enabled: false
      allowed_domains: nalbam.com daangn.com opspresso.com
  datasource:
    demo: http://prom.in.demo.opspresso.com
    demo_a: http://prom.in.demo-a.opspresso.com
    demo_b: http://prom.in.demo-b.opspresso.com
    loki: http://loki.in.demo.opspresso.com

loki:
  hostname: loki.in.demo.opspresso.com

prometheus:
  serviceMonitor:
    enabled: false
  # node-exporter:
  #   image:
  #     registry: 082867736673.dkr.ecr.ap-northeast-2.amazonaws.com
  #     repository: mirror/prometheus/node-exporter

# promtail:
#   image:
#     registry: 082867736673.dkr.ecr.ap-northeast-2.amazonaws.com
#     repository: mirror/grafana/promtail
