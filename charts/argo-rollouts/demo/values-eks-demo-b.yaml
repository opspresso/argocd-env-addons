argo-rollouts:
  fullnameOverride: argo-rollouts

  controller:
    resources:
      requests:
        cpu: 256m
        memory: 1Gi
      limits:
        memory: 1Gi
    metrics:
      enabled: true
      serviceMonitor:
        enabled: False
        namespace: addon-argo-rollouts

  dashboard:
    enabled: true

    resources:
      requests:
        cpu: 50m
        memory: 64Mi
      limits:
        cpu: 100m
        memory: 128Mi

    podAnnotations:
      link.argocd.argoproj.io/external-link: "https://rollouts.demo.opspresso.com"

    ingress:
      enabled: false
      ingressClassName: "nginx"
      hosts:
        - "rollouts.demo.opspresso.com"

route:
  resources:
    - apiVersion: networking.istio.io/v1beta1
      kind: Gateway
      metadata:
        name: argo-rollouts-dashboard
      spec:
        selector:
          istio: ingressgateway
        servers:
          - hosts:
              - "rollouts.demo.opspresso.com"
            port:
              number: 3100
              name: http
              protocol: HTTP

    - apiVersion: networking.istio.io/v1beta1
      kind: VirtualService
      metadata:
        name: argo-rollouts-dashboard
      spec:
        hosts:
          - "rollouts.demo.opspresso.com"
        gateways:
          - argo-rollouts-dashboard
        http:
          - route:
              - destination:
                  host: argo-rollouts-dashboard
                  port:
                    number: 3100